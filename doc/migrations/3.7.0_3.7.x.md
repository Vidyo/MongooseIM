## Changes in hooks

If modified the code, e.g. by adding a custom extension module, you might want to update your handlers to the following hooks. You can find them in the `mongoose_hooks` module.

* We refactored the MAM (XEP-0313) implementation, replacing the long lists of arguments accepted by the `mam_archive_message` and `mam_muc_archive_message` hooks with a more readable key-value structure (a map).
* The argument list of the `failed_to_store_message` hook has been changed as a result of code refactoring.

## Migrating the HTTP pool configuration

As we upgraded the underlying library, in order to achieve compatibility with the HTTP/2 protocol,
its configuration has slightly changed, mainly the options passed directly to the underlying
library.

With fusco, this was done with the option `{http_opts, Opts}`, where `Opts` was a list of key-value
pairs. For gun, `Opts` instead takes the form of a map. More details about each library
configuration can be found in their respective documentations: [gun](gun) and [fusco](fusco)

[fusco]: https://github.com/esl/fusco
[gun]: https://ninenines.eu/docs/en/gun/2.0/manual/
